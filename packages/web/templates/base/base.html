<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="minimum-scale=1, initial-scale=1, maximum-scale=1, width=device-width, height=device-height">
<link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/static/favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/embedded.css">
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
<title>{% block title %}{% endblock %}</title>
</head>
<body class="d-flex flex-column align-items-stretch">
  <ui-appbar title="PixelBin">
    {%- match user %}
      {%- when Some with (user) -%}
        <ui-avatar email="{{user.email}}"></ui-avatar>
      {%- else -%}
        <ui-button color="light" onclick="login()">Login</ui-button>
    {%- endmatch %}
  </ui-appbar>
  {%- if !catalogs.is_empty() %}
    <div class="flex-grow-1 flex-shrink-1 d-flex flex-row overflow-hidden">
      <nav class="overflow-y-auto flex-shrink-0 text-body bg-body p-3">
        <ui-iconlist>
          {%- for catalog in catalogs %}
            <ui-iconlistitem icon="file-earmark-richtext" href="/catalog/{{catalog.catalog.id}}" label="{{catalog.catalog.name}}">
              <ui-iconlist>
                {%- if !catalog.searches.is_empty() %}
                  <ui-iconlistitem icon="search" label="Saved Searches">
                    <ui-iconlist>
                      {%- for search in catalog.searches %}
                        <ui-iconlistitem icon="search" href="/search/{{search.id}}" label="{{search.name}}"></ui-iconlistitem>
                      {%- endfor %}
                    </ui-iconlist>
                  </ui-iconlistitem>
                {%- endif %}
                {%- if !catalog.albums.is_empty() %}
                  <ui-iconlistitem icon="images" label="Albums">
                    <ui-iconlist>
                      {%- for album in catalog.albums %}
                        {{ album|safe }}
                      {%- endfor %}
                    </ui-iconlistitem>
                  </ui-iconlistitem>
                {%- endif %}
              </ui-iconlist>
            </ui-iconlistitem>
          {%- endfor %}
        </ui-iconlist>
      </nav>
  {%- endif %}
  {%- block content %}{% endblock -%}
  {%- if !catalogs.is_empty() %}
    </div>
  {%- endif %}
</body>
</html>
